
.. _ispolzovanie-sistemyi-modul-ip-pulyi:

=====================
4.12 Модуль «IP-пулы»
=====================


В данном разделе настраиваются диапазоны (или «пулы», от англ. «pool» –
запас, группа) IP-адресов, адреса из которых выдаются клиентам.



4.12.1 Назначение и особенности
===============================


В соответствии правилами, потребляемый пользователями трафик относится
системой к одной либо нескольким категориям (классам) для удобства
тарификации и учета.



Разделение на классы трафика используется для списания денег за трафик,
установки лимитов его потребления, а также в подсистеме статистики и создания
отчетов. Expert Billing System позволяет гибко разделять трафик по классам в
зависимости от направления (входящий/исходящий), сетей отправителя и
получателя, используемых протоколов, портов и т.д.



Статистика о трафике считается принадлежащей классу, если её параметры (порт,
протокол, адрес и  т.п.) соответствуют хотя бы одному из правил подклассов
данного класса. Трафик, не попавший под описание ни одного из классов, в базу
данных не записывается.



В системе Expert Billing System каждый класс имеет уникальный порядковый
номер. Сравнение статистики с классами происходит от меньшего класса к
большему (сверху вниз). Для повышения либо понижения веса класса используются
кнопки «Повысить» и «Понизить» на панели.



После того, как записи статистики («трафик») попадают под описание класса,
поиск других классов, которым она может также соответствовать, не
производится. Однако если в опциях класса указано «Пометить и продолжить», то
поиск соответствий продолжается до тех пор, пока не обнаружится соответствия
трафика классу с отключенной опцией «Пометить и продолжить».



4.12.2 Интерфейс и логика
=========================


Элементы раздела «Отчёты» доступны только через меню «Отчёты»;



При выборе в меню необходимого типа отчета, открывается соответствующее
рабочее окно.



.. image:: _images/ebs_182.png
    :alt: ebs_182




Большую часть окна занимает рабочее поле, куда будет выведен текст и графика
отчета, остальное – панель управления с двумя кнопками, «Конфигурировать» и
«Печатать».



Окно «Настройки отчета»



Окно «Настройки отчета» (открывается по нажатию кнопки «Конфигурировать»)
имеет стандартный вид и может содержать от одной до четырех нескольких
вкладок. На первой вкладке («Общее») представлены стандартные настройки
отчета. В зависимости от типа отчета некоторые элементы и группы элементов
могут быть недоступны.



.. image:: _images/ebs_183.png
    :alt: ebs_183




Группа «Данные» позволяет выбрать, чем будет измеряться потребление в отчете:
скоростью канала или использованным трафиком.



В группе «Внешний вид» настраивается сглаживание точек результирующих
графиков (флажок  «Сглаживание») и возможность построения дополнительных
вспомогательных линий на графике («Сетка»).



«Группировать по…» – флажки в этом блоке предназначены для группирования
наиболее популярных (или же активных)  клиентов, групп и классов трафика, а
также сетевых серверов.



«Трафик» – в этом блоке выбирается, какой трафик будет считаться: входящий,
исходящий, наибольший или  суммарный.



В зависимости от типа отчета на дополнительных вкладках предлагается выбрать
пользователей, участвующих в формировании отчета, а также серверы доступа или
обрабатываемые классы трафика.



4.12.3 Примеры
==============


На изображениях приведены варианты настроек для двух простых расчетных
периодов:



.. image:: _images/ebs_212.png
    :alt: ebs_212


Каждый новый период будет начинаться в то же время, когда период был
активирован + N*количество месяцев.



.. image:: _images/ebs_213.png
    :alt: ebs_213


Каждый новый период будет начинаться 1 числа каждого месяца в 00:00:00.

