<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Назначение и особенности</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
<script type="text/javascript" src="helpman_topicinit.js"></script></head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">
<div id="hmpopupDiv" style="visibility:hidden; position:absolute; z-index:1000; "></div>


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#C0C0C0">
  <tr valign="middle">
    <td align="left">
      <p class="par3"><span class="fnt4">Назначение и особенности</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="chapter_2.html">Top</a>&nbsp;
     <a href="new_item12.html">Previous</a>&nbsp;
     <a href="eioaoaen10.html">Next</a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Раздел используется для настройки параметров работы системы с серверами доступа.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Система Expert Billing System обладает встроенной поддержкой серверов доступа на базе Mikrotik RouterOS и возможностью использования других серверов доступа, поддерживающих требуемый RADIUS функционал и управление через SSH. Конфигурации команд для RouterOS версий 2.8.х, 2.9.х и 3.х. включены в состав системы и не требуют дополнительных настроек для использования. </span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Чтобы обеспечить взаимодействие Expert Billing System с другими типами серверов доступа, необходимо самостоятельно указать действия, которые необходимо произвести на сервере доступа при возникновении тех или иных событий: создания и удаления, активации и деактивации пользователя, сброса сессии пользователя, а также для установки скорости VPN/IPN-клиентов. </span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic; font-weight: bold; color: #ff0000;">Обратите внимание:</span><span style="font-size: 16px; font-family: 'Times New Roman';"> для HotSpot сессий изменение скорости и сброс сессий происходит посредством технологий RADIUS CoA и POD.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Команда создания пользователя выполняется при создании нового аккаунта (для ТП с возможностью «IPN-действий»), либо же при ручном добавлении аккаунта на сервер доступа («Добавить на сервер доступа»). Аналогичным образом используются команды удаления пользователя, его активации/деактивации. Команда сброса сессии посылается на сервер доступа в случае принудительного ограничения доступа через «Монитор сессий», а также для работающих через PPTP/PPPOE/HotSpot пользователей при израсходовании средств на лицевом счете, превышении лимитов времени и/или трафика, выходе за рамки разрешённого временного диапазона.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">При успешной аутентификации абонента RADIUS-сервер посылает на сервер доступа следующие атрибуты:</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Service-Type Framed-User</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Framed-Protocol &nbsp;PPP</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Framed-IP-Address VPN IP адрес абонента</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">При описании команд </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Сбросить сессию пользователя»</span><span style="font-size: 16px; font-family: 'Times New Roman';">, </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Установить скорость для VPN клиента», «Установить скорость для IPN клиента»</span><span style="font-size: 16px; font-family: 'Times New Roman';"> допускается использование следующих параметров:</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$access_type [pptp/pppoe/ipn]</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – способ доступа</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$username</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – имя пользователя</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$user_id </span><span style="font-size: 16px; font-family: 'Times New Roman';">– уникальный идентификатор пользователя</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$account_ipn_ip</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – IP-адрес учетной записи (пользователи, подключающиеся по IPN)</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$account_vpn_ip</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – IP-адрес учетной записи (пользователи, подключающиеся по VPN)</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$account_mac_address</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – MAC-адрес пользователя с данной учетной записью</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$session </span><span style="font-size: 16px; font-family: 'Times New Roman';">– идентификатор сессии</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">При описании команд «Создать пользователя», «Удалить пользователя», «Активировать пользователя», «Деактивировать пользователя» допускается использование следующих параметров:</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$access_type [pptp/pppoe/ipn/hotspot]</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – способ доступа</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$password</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – пароль пользователя</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$username</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – имя пользователя</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$user_id</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – уникальный идентификатор пользователя</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$account_ipn_ip</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – IP-адрес учетной записи (пользователи, подключающиеся по IPN)</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$account_vpn_ip</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – IP-адрес учетной записи (пользователи, подключающиеся по VPN)</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">$account_mac_address</span><span style="font-size: 16px; font-family: 'Times New Roman';"> – MAC-адрес пользователя с данной учетной записью</span></p>
<p style="text-align: justify;"><span style="width:48px">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-weight: bold; color: #ff0000; text-decoration: underline;">Обратите внимание:</span><span style="font-size: 16px; font-family: 'Times New Roman'; color: #ff0000;"> </span><span style="font-size: 16px; font-family: 'Times New Roman';">управление сервером доступа происходит только в том случае, если абонент подключен на IPN-тариф или в VPN-тарифе выбрана опция «Производить IPN-действия».</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-weight: bold; color: #ff0000; text-decoration: underline;">Обратите внимание:</span><span style="font-size: 16px; font-family: 'Times New Roman'; font-weight: bold;"> </span><span style="font-size: 16px; font-family: 'Times New Roman';">по умолчанию система оперирует списком доступа под названием internet_users. Вы должны самостоятельно указать необходимые действия со списком доступа, которые разрешат всем его активным IP-адресам доступ к услугам и запретят всем остальным.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Если вы не планируете использовать VPN-тарифы, это можно реализовать следующим образом:</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p class="par1"><span class="fnt1">/ip firewall filter add chain=forward src-address-list=internet_users action=accept</span><br />
<span class="fnt1">/ip firewall filter add chain=forward dst-address-list=internet_users action=accept</span><br />
<span class="fnt1">/ip firewall filter add chain=forward action=drop</span></p>
<p class="par1"><span class="fnt1">/ip firewall nat add src-address-list=internet_users action=masquerade</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Если совместно с IPN- &nbsp;будут использоваться также VPN-тарифы в профиле PPTP/PPPOE абонента нужно указать этот же address list</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: center;"><img src="ppp_profile_address_list.png" width="334" height="514" alt="ppp_profile_address_list" style="border:none" /></p>
<p style="text-align: center;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">Настройка PPP address list PPPOE профиля</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">В данной конфигурации система правил маршрутизатора даст доступ в интернет только авторизованным абонентам.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-weight: bold; color: #ff0000; text-decoration: underline;">Обратите внимание:</span><span style="font-size: 16px; font-family: 'Times New Roman';"> задержка между проверками на необходимость включения/отключения /добавления/удаления абонентов на сервере доступа происходит раз в несколько минут, поэтому отсылка команд на сервер доступа происходит не мгновенно.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-weight: bold; color: #ff0000; text-decoration: underline;">Обратите внимание:</span><span style="font-size: 16px; font-family: 'Times New Roman';"> при ручном конфигурировании шаблонов обратите внимание на то, что на сервере доступа уже могут существовать записи, которые вы собираетесь добавлять, поэтому перед добавлением новой записи в отдельных случаях есть смысл попробовать произвести удаление старой.</span></p>
<hr noshade="noshade" size="1" /><p>This help file was created with an unregistered evaluation copy of Help &amp; Manual. © EC Software. All rights reserved. This message will not appear if you compile this help file with the registered version of Help &amp; Manual.</p>

</td></tr></table>

</body>
</html>
