<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Интерфейс и логика</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
<script type="text/javascript" src="helpman_topicinit.js"></script></head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">
<div id="hmpopupDiv" style="visibility:hidden; position:absolute; z-index:1000; "></div>


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#C0C0C0">
  <tr valign="middle">
    <td align="left">
      <p class="par3"><span class="fnt4">Интерфейс и логика</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="chapter_2.html">Top</a>&nbsp;
     <a href="iaciaaiea_e_iniaaiiinoe4.html">Previous</a>&nbsp;
     <a href="ieiau4.html">Next</a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Открыть раздел «Классы трафика» можно одним из следующих способов:</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify; text-indent: 47px;"><span style="font-size: 16px; font-family: 'Times New Roman';">– кнопкой на панели;</span></p>
<p style="text-align: justify; text-indent: 47px;"><span style="font-size: 16px; font-family: 'Times New Roman';">– через меню «Главное меню» → «Классы трафика»;</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">Интерфейс окна составляют кнопки «Добавить класс» и «Удалить класс», «Добавить подкласс» и «Удалить подкласс», «Повысить» и «Понизить», список классов (левая часть экрана) и таблица с подклассами в правом. Для каждого подкласса в таблице приводится название (Name), а также правила отбора трафика для подкласса по направлению (Direction), протоколу (Protocol), диапазонам адресов (Src/Dst IP) и портов (Src/Dst Port) входящего и исходящего трафика, а также адресу следующей точки в маршруте трафика (Next Hop). </span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: center;"><img src="ebs_160.png" width="824" height="279" alt="ebs_160" style="border:none" /></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Добавить класс» &nbsp;– </span><span style="font-size: 16px; font-family: 'Times New Roman';">вызывает окно «Класс трафика», описанное ниже. </span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Удалить класс» – </span><span style="font-size: 16px; font-family: 'Times New Roman';">удаляет выбранный класс со всеми подклассами. Удаление класса трафика необратимо!</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Повысить» – </span><span style="font-size: 16px; font-family: 'Times New Roman';">поднимает вес выбранного класса на одну единицу и перемещает его вниз в списке классов.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Понизить» </span><span style="font-size: 16px; font-family: 'Times New Roman';">– снижает вес выбранного класса на одну единицу и перемещает его вверх в списке классов.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Добавить подкласс» </span><span style="font-size: 16px; font-family: 'Times New Roman';">– &nbsp;вызывает окно «Трафик», описанное ниже.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Удалить подкласс» – </span><span style="font-size: 16px; font-family: 'Times New Roman';">удаляет выбранный подкласс. Удаление подкласса трафика необратимо!</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 21px; font-family: 'Times New Roman'; font-weight: bold;">Окно «Классы»</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Окно «Классы» открывается при добавлении класса трафика (кнопка «Добавить класс»), двойном щелчке по существующему классу трафика, а также при выборе пункта </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Edit class»</span><span style="font-size: 16px; font-family: 'Times New Roman';"> в контекстном меню. Здесь устанавливается название класса, его цвет (для дифференциации соответствующего этому классу трафика в сетевой статистике»), а также дополнительные параметры класса (флажки </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Хранить сырую статистику»</span><span style="font-size: 16px; font-family: 'Times New Roman';"> и </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Пометить и продолжить»</span><span style="font-size: 16px; font-family: 'Times New Roman';">).</span></p>
<p>&nbsp;</p>
<p style="text-align: center;"><img src="ebs_161.png" width="337" height="213" alt="ebs_161" style="border:none" /></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Если флажок </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Пометить и продолжить» </span><span style="font-size: 16px; font-family: 'Times New Roman';">установлен, то при обнаружении трафика, подходящего под определение данного класса, трафик будет к нему отнесен, а затем продолжится поиск соответствий условиям других классов. Если флажок не установлен, то трафик, соответствующий этому классу, не сможет быть отнесен одновременно к нескольким классам.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Опцию </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Хранить сырую статистику»</span><span style="font-size: 16px; font-family: 'Times New Roman';"> необходимо использовать лишь в том случае, если вы хотите просматривать детальную сетевую статистику об активности абонентов. Обратите внимание, что это может значительно замедлить работу системы при высоких нагрузках, а также значительно увеличит базу данных в объеме.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Сырая NetFlow-статистика хранится в базе данных в виде отдельных таблиц на каждый день (nfsгодмесяцдень). Вы можете самостоятельно удалять ненужные таблицы. Чтобы получить доступ сразу ко всей статистике, пользуйтесь таблицей billservice_netflowstream, которая агрегирует все данные из дочерних таблиц (nfsгодмесяцдень).</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Обратите внимание, что для уменьшения количества записей в базе данных система агрегирует похожую статистику по одинаковым классам для каждого пользователя. Время агрегации настраивается в файле настроек биллинг-системы ebs_config.ini параметром aggrtime. Не рекомендуется снижать указанное по-умолчанию время.</span></p>
<p>&nbsp;</p>
<p style="text-align: justify;"><span style="font-size: 21px; font-family: 'Times New Roman'; font-weight: bold;">Окно «Параметры подкласса»</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Окно «Параметры подкласса» открывается при добавлении подкласса трафика (кнопка «Добавить подкласс»), двойном щелчке по существующему подклассу трафика, а также при выборе пункта «edit node» в контекстном меню. Здесь непосредственно устанавливаются правила, на соответствие которым проверяется трафик.</span></p>
<p>&nbsp;</p>
<p style="text-align: center;"><img src="subclass+example.png" width="229" height="383" alt="subclass+example" style="border:none" /></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Название подкласса вводится в поле </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Название»</span><span style="font-size: 16px; font-family: 'Times New Roman';">. Оно не должно быть пустым.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic; font-weight: bold; color: #ff0000;">Внимание:</span><span style="font-size: 16px; font-family: 'Times New Roman';"> в пределах одного класса необходимо описать как входящие так и исходящие направления трафика!</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">В выпадающем списке </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Направление»</span><span style="font-size: 16px; font-family: 'Times New Roman';"> необходимо указать, к какому направлению относится трафик для данного подкласса, входящему (INPUT) либо исходящему (OUTPUT). &nbsp;Все направления указываются относительно клиента. &nbsp;Внутри каждого класса рекомендуется создать подклассы для трафика с определённых адресов (исходящий трафик) и на эти адреса (входящий трафик).</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Выпадающий список </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Протокол» </span><span style="font-size: 16px; font-family: 'Times New Roman';">служит для отделения трафика по признаку протокола (UDP, RDP, GGP, IPIP, DDP, HMP, TCP, OSPF, GRE, ENCAP, ICMP, IGMP, IPENCAP, IDPR-CMTP). Если выбрать пустое поле, то протокол не будет учитываться.</span></p>
<p>&nbsp;</p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">В группе </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Сеть источника» </span><span style="font-size: 16px; font-family: 'Times New Roman';">устанавливаются адреса (</span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Src net»</span><span style="font-size: 16px; font-family: 'Times New Roman';">), а также, при необходимости, порт (</span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Src port»</span><span style="font-size: 16px; font-family: 'Times New Roman';">) исходящего от клиента трафика. Если указаны адреса 0.0.0.0/0, то правило будет действовать для всех IP-адресов. Или же нужно указать конкретную подсеть в следующей форме: например, 192.168.1.0/24 будет означать диапазон адресов от 192.168.1.1 до 192.168.1.254.</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman'; font-weight: bold; color: #ff0000; text-decoration: underline;">Обратите внимание:</span><span style="font-size: 16px; font-family: 'Times New Roman'; color: #ff0000;"> </span><span style="font-size: 16px; font-family: 'Times New Roman';">для указания «любого IP-адреса» пользуйтесь значением 0.0.0.0/0. Адрес 0.0.0.0 (0.0.0.0/32) система воспринимает как один IP адрес. Для указания конкретного IP-адреса пользуйтесь записью вида 192.168.1.1/32</span></p>
<p style="text-align: justify;"><span style="color: #000000;">&nbsp;</span></p>
<p style="text-align: justify;"><span style="font-size: 16px; font-family: 'Times New Roman';">В группе </span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Сеть получателя»</span><span style="font-size: 16px; font-family: 'Times New Roman';"> устанавливаются адреса (</span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Dst net»</span><span style="font-size: 16px; font-family: 'Times New Roman';">), а также, при необходимости, порт (</span><span style="font-size: 16px; font-family: 'Times New Roman'; font-style: italic;">«Dst port»</span><span style="font-size: 16px; font-family: 'Times New Roman';">).</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Трафик может проверяться на соответствие по адресу следующей точки в маршруте следования (поле «Next Hop»). Проверка не производится, если в данном поле установлено значение 0.0.0.0 (значение по умолчанию). Например, для того, чтобы охватить подклассом весь трафик, который далее следовал на адрес 123.123.123.123, установите в поле «Next Hop» это значение.</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px; font-family: 'Times New Roman';">Поля Src port/Dst port в случае указания протоколов, не использующих порты, содержат значения опций протоколов(icmp и др) или не имеют смысла вовсе.</span></p>
<hr noshade="noshade" size="1" /><p>This help file was created with an unregistered evaluation copy of Help &amp; Manual. © EC Software. All rights reserved. This message will not appear if you compile this help file with the registered version of Help &amp; Manual.</p>

</td></tr></table>

</body>
</html>
