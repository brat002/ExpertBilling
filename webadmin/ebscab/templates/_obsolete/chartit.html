{% load static %}


<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <!-- code to include the highcharts and jQuery libraries goes here -->
    <!-- load_charts filter takes a comma-separated list of id's where -->
    <!-- the charts need to be rendered to                             -->
<script  type="text/javascript" >
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line'
        },
        title: {
            text: '{{report_name}}'
        },

        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: { // don't display the dummy year
                month: '%e. %b',
                year: '%b'
            }
        },
        yAxis: {
            title: {
                text: 'Snow depth (m)'
            },
            min: 0
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    Highcharts.dateFormat('%e. %b', this.x) +': '+ this.y +' m';
            }
        },

        series: [
                 {% for username, data in res %}
                 {
                	    name: '{{username}}',
                   data: [
                   {% for datetime, balance in data %}
                   [Date.UTC({{datetime.year}},  {{datetime.month}},{{datetime.day}},{{datetime.hour}},{{datetime.minute}}),  {{balance}}   ],
                {% endfor %}
                   ]
                 },
                 {% endfor %}
                 ]
    });
});
</script>
<script type="text/javascript" src="{% static 'highcharts/js/highcharts.js' %}"></script>
</head>
<body>

    <div id='container'> Chart will be rendered here </div>
</body>
